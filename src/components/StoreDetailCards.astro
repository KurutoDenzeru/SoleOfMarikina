---
import { MapPin } from "lucide-react";

type StoreCard = {
  title: string;
  href?: string;
};

type Props = {
  mode?: "overlay" | "list";
  storeId?: string;
  storeName?: string;
  address?: string;
  cards: StoreCard[];
  className?: string;
};

const {
  mode = "overlay",
  storeId = "",
  storeName = "",
  address = "",
  cards,
  className = "",
} = Astro.props as Props;
---

{
  mode === "overlay" ? (
    <section
      id={`store-panel-${storeId}`}
      data-store-panel={storeId}
      aria-hidden="true"
      class:list={[
        "pointer-events-none absolute inset-x-0 top-16 z-30 translate-y-8 scale-95 opacity-0 transition-all duration-500 ease-[cubic-bezier(0.2,0.75,0.2,1)]",
        className,
      ]}
    >
      <div class="mx-auto w-full max-w-[430px] px-5 sm:px-6">
        <div class="mb-3 flex items-center justify-center gap-2">
          <MapPin className="size-9 shrink-0 text-black" />
          <div class="w-full max-w-[340px] rounded-full bg-black px-6 py-2 text-white">
            <p class="text-lg leading-[0.9] font-semibold tracking-tight">
              {storeName}
            </p>
            <p class="mt-1 text-sm leading-none font-medium text-white/90">
              {address}
            </p>
          </div>
        </div>

        <div class="mx-auto w-full space-y-5">
          {cards.map((card) => {
            const lines = card.title.split("\n");
            return (
              <a
                href={card.href ?? "#"}
                data-store-card
                class="group relative block w-full min-h-46 cursor-pointer overflow-hidden rounded-3xl bg-black px-6 py-7 shadow-md transition-all duration-300 ease-out hover:-translate-y-1 hover:shadow-[0_12px_28px_rgba(0,0,0,0.45)] active:translate-y-0 active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/90 focus-visible:ring-offset-2 focus-visible:ring-offset-black touch-manipulation sm:min-h-[12.2rem]"
              >
                <span class="relative flex min-h-32 items-center justify-center sm:min-h-[8.6rem]">
                  <span class="text-center text-2xl leading-[0.84] font-black uppercase tracking-tight text-white sm:text-5xl">
                    {lines.map((line) => (
                      <span class="block">{line}</span>
                    ))}
                  </span>
                </span>
              </a>
            );
          })}
        </div>
      </div>
    </section>
  ) : (
    <section class:list={["w-full px-0 pb-8", className]}>
      <div class="mx-auto w-full max-w-[430px] space-y-5">
        {cards.map((card) => {
          const lines = card.title.split("\n");
          return (
            <a
              href={card.href ?? "#"}
              class="group relative block w-full min-h-48 cursor-pointer overflow-hidden rounded-3xl bg-black px-8 py-10 shadow-md transition-all duration-300 ease-out hover:-translate-y-1 hover:shadow-[0_12px_28px_rgba(0,0,0,0.45)] active:translate-y-0 active:scale-[0.985] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/90 focus-visible:ring-offset-2 focus-visible:ring-offset-black touch-manipulation"
            >
              <span class="relative flex min-h-36 items-center justify-center">
                <span class="text-center text-2xl leading-[0.84] font-black uppercase tracking-tight text-white sm:text-5xl">
                  {lines.map((line) => (
                    <span class="block">{line}</span>
                  ))}
                </span>
              </span>
            </a>
          );
        })}
      </div>
    </section>
  )
}
